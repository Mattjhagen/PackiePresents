<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PacMac Presents</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background-color: #000;
      color: #00ff99;
      font-family: monospace;
      text-align: center;
      padding: 20px;
    }
    input, button {
      margin: 10px;
      padding: 8px;
      border-radius: 5px;
      border: none;
    }
    button {
      background-color: #111;
      color: #00ff99;
      cursor: pointer;
    }
    #progressBar {
      width: 100%;
      height: 10px;
      background-color: #111;
      overflow: hidden;
      position: relative;
    }
    #progressBar::before {
      content: '';
      position: absolute;
      width: 30%;
      height: 100%;
      background-color: #00ff99;
      animation: loading 1.5s infinite linear;
    }
    @keyframes loading {
      from { left: -30%; }
      to { left: 100%; }
    }
    a {
      color: #00ff99;
    }
  </style>
</head>
<body>

  <!-- Upload + Generate Form -->
  <section id="resume-generator">
    <h2>Build Your Digital Presence</h2>
    <p>Select your resume (.txt) and customize your colors:</p>
    <input type="file" id="resumeUpload" accept=".txt"><br><br>

    <label for="color1">Primary Color:</label>
    <input type="color" id="color1" value="#00ff99"><br><br>

    <label for="color2">Secondary Color:</label>
    <input type="color" id="color2" value="#111111"><br><br>

    <label for="yourName">Your Name:</label>
    <input type="text" id="yourName" placeholder="Matt"><br><br>

    <label for="bio">Short Bio:</label>
    <input type="text" id="bio" placeholder="Builder. Nomad. Dreamer."><br><br>

    <button type="button" onclick="showLoadingEffect(generateAboutPage)">Generate My About Me Page</button>

    <!-- Loading animation bar -->
    <div id="loadingBar" style="display:none; margin-top:20px;">
      <div id="progressBar"></div>
      <p style="color: #00ff99;">âš¡Generating... Stand by hacker âœ¨</p>
    </div>
  </section>

  <!-- Support Section -->
  <section id="support">
    <h2>Support Our Journey</h2>
    <p>Weâ€™re working toward a solar generator & off-grid dev setup.</p>
    <p><a href="https://www.venmo.com/u/PackieMobile" target="_blank">ðŸ’š Spot Some Green</a></p>
    <iframe src="https://github.com/sponsors/Mattjhagen/card" height="225" width="600" title="Sponsor Matt and Terra on GitHub"></iframe>
  </section>

  <!-- JavaScript Logic -->
  <script>
    function showLoadingEffect(callback) {
      const loadingBar = document.getElementById("loadingBar");
      loadingBar.style.display = "block";
      setTimeout(() => {
        callback();
      }, 1500);
    }

    function generateAboutPage() {
      const fileInput = document.getElementById("resumeUpload");
      const color1 = document.getElementById("color1").value;
      const color2 = document.getElementById("color2").value;
      const name = document.getElementById("yourName").value;
      const bio = document.getElementById("bio").value;

      const file = fileInput.files[0];
      if (!file) {
        alert("Please upload a resume file first.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        const resumeText = e.target.result;

        const aboutPage = `
          <html>
          <head>
            <title>${name}'s About Me</title>
            <style>
              body {
                background-color: ${color2};
                color: ${color1};
                font-family: monospace;
                padding: 20px;
              }
              h1 {
                color: ${color1};
              }
              pre {
                background-color: rgba(0,0,0,0.2);
                padding: 10px;
                border-radius: 5px;
              }
            </style>
          </head>
          <body>
            <h1>${name}</h1>
            <p><em>${bio}</em></p>
            <h2>Resume</h2>
            <pre>${resumeText}</pre>
          </body>
          </html>
        `;

        const blob = new Blob([aboutPage], { type: "text/html" });
        const url = URL.createObjectURL(blob);
        window.open(url, "_blank");
      };
      reader.readAsText(file);
    }
  </script>

</body>
</html>